<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/svg" href="/favicon.svg">
        <script type="text/javascript" src="/js/global/JQuery/jquery-3.7.1.min.js"></script>
        <style>
            html, body {
                margin: 0;
                padding: 0;
            }
            body {
                background-color: #333;
                overflow: hidden;
            }
            a {
                text-decoration: none;
                color: black;
            }
            .win {
                top: 50px;
                left: 50px;
                width: 200px;
                height: 200px;
                background-color: white;
                z-index: 0;
                box-sizing: border-box;
                position: absolute;
                border-radius: 10px;
            }
            .win-title-bar {
                display: flex;
                position: relative;
                background-color: whitesmoke;
                z-index: 999;
                height: 2rem;
                flex-direction: row;
                flex-wrap: nowrap;
                align-content: center;
                justify-content: space-between;
                align-items: center;
                border-top-left-radius: inherit;
                border-top-right-radius: inherit;
                padding: 8px;
                box-sizing: border-box;
            }
            .win-title {
                flex-direction: row;
                align-content: center;
            }
            .win-title img {
                height: calc(2rem - 10px);
                margin-top: 6px;
            }
            .win-close {
                height: inherit;
                float: right;
                margin-right: 8px;
                cursor: context-menu;
            }
            .win-close a {
                text-align: center;
                font-size: 1.2rem;
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                cursor: context-menu;
            }
            .win-drag {
                height: 2rem;
                flex: 1;
            }
            .win-drag p {
                margin: 5px 0 0 8px;
                cursor: context-menu;
            }
        </style>
        <script>
            $(function() {
                çª—å£å¯ä»¥ç§»åŠ¨();
            });
            function çª—å£å¯ä»¥ç§»åŠ¨() {
                //åˆå§‹åŒ–åç§»å€¼
                var åç§»X = 0;
                var åç§»Y = 0;
                const çª—å£ = $("#çª—å£");
                //æ£€æµ‹é¼ æ ‡æŒ‰ä¸‹çš„äº‹ä»¶ï¼Œç»‘å®šåˆ°æ ‡é¢˜æ 
                $(document).on("mousedown", ".win-drag", (e) => {
                    //è®¡ç®—åç§»å€¼
                    åç§»X = e.clientX - parseInt(çª—å£.css("left"));
                    åç§»Y = e.clientY - parseInt(çª—å£.css("top"));
                    //é¼ æ ‡ç§»åŠ¨æ—¶å®æ—¶æ›´æ–°,ä¸ºäº†æ€§èƒ½æ‰€ä»¥å¼‚æ­¥
                    $(document).mousemove(async function(event) {
                        çª—å£.css("left", (event.clientX - åç§»X) + 'px');
                        çª—å£.css("top", (event.clientY - åç§»Y) + 'px');
                    });
                });
                //é¼ æ ‡æŠ¬èµ·æ—¶è§£ç»‘
                $(document).mouseup((event) => {
                    $(document).unbind('mouseover').unbind('mouseout').unbind('mousemove');
                });
            }
            let å·²ç»æœ€å¤§åŒ–äº† = false
            let çª—å£Xè½´, çª—å£Yè½´, çª—å£é«˜åº¦, çª—å£å®½åº¦;
            function æœ€å¤§åŒ–() {
                if (å·²ç»æœ€å¤§åŒ–äº†) {
                    //æŠŠçª—å£é‡æ–°å¼„åˆ°åŸæ¥çš„ä½ç½®
                    $('#çª—å£').css('width', çª—å£å®½åº¦)
                    $('#çª—å£').css('height', çª—å£é«˜åº¦);
                    $('#çª—å£').css('top', çª—å£Yè½´);
                    $('#çª—å£').css('left', çª—å£Xè½´);
                    $("#çª—å£").css("border-radius", "10px");
                    $(".win-title-bar").css("border-top-left-radius", "inherit");
                    $(".win-title-bar").css("border-top-right-radius", "inherit");
                    çª—å£å¯ä»¥ç§»åŠ¨();
                } else {
                    //è®°å½•çª—å£ä½ç½®å¤§å°
                    çª—å£Xè½´ = $('#çª—å£').css('left');
                    çª—å£Yè½´ = $('#çª—å£').css('top');
                    çª—å£é«˜åº¦ = $('#çª—å£').css('height');
                    çª—å£å®½åº¦ = $('#çª—å£').css('width');
                    //æœ€å¤§åŒ–
                    $(document).unbind("mousedown");
                    $('#çª—å£').css('width', '100%')
                    $('#çª—å£').css('height', 'calc(100dvh - 48px)');
                    $('#çª—å£').css('top', 0);
                    $('#çª—å£').css('left', 0);
                    $(".win-title-bar, #çª—å£").css('border-radius', "0");
                }
                å·²ç»æœ€å¤§åŒ–äº† = !å·²ç»æœ€å¤§åŒ–äº†
            }
        </script>
    </head>
    <body>
        <div id="çª—å£" class="win">
            <div class="win-title-bar">
                <div class="win-title">
                    <img src="/resource/blogger/blogger.png">
                </div>
                <div class="win-drag">
                    <p>çª—å£æ ‡é¢˜</p>
                </div>
                <div class="win-close">
                    <a href="javascript:void(0);" onclick="$('#çª—å£').remove()">ğŸ—•</a>
                    <a href="javascript:void(0);" onclick="æœ€å¤§åŒ–()">ğŸ——</a>
                    <a href="javascript:void(0);" onclick="$('#çª—å£').remove()">ğŸ—™</a>
                </div>
            </div>
        </div>
    </body>
</html>